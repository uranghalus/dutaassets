// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
}

model User {
  id              String    @id
  name            String    @db.Text
  email           String
  emailVerified   Boolean   @default(false)
  image           String?   @db.Text
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  username        String?   @db.Text
  displayUsername String?   @db.Text
  role            String?   @db.Text
  banned          Boolean?  @default(false)
  banReason       String?   @db.Text
  banExpires      DateTime?
  sessions        Session[]
  accounts        Account[]

  @@unique([email])
  @@map("user")
}

model Session {
  id             String   @id
  expiresAt      DateTime
  token          String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  ipAddress      String?  @db.Text
  userAgent      String?  @db.Text
  userId         String
  user           User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  impersonatedBy String?  @db.Text

  @@unique([token])
  @@index([userId(length: 191)])
  @@map("session")
}

model Account {
  id                    String    @id
  accountId             String    @db.Text
  providerId            String    @db.Text
  userId                String
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  accessToken           String?   @db.Text
  refreshToken          String?   @db.Text
  idToken               String?   @db.Text
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?   @db.Text
  password              String?   @db.Text
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt

  @@index([userId(length: 191)])
  @@map("account")
}

model Verification {
  id         String   @id
  identifier String   @db.Text
  value      String   @db.Text
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([identifier(length: 191)])
  @@map("verification")
}

model Department {
  id_department   String @id
  kode_department String @db.Text
  nama_department String @db.Text
  id_hod          String @db.Text

  divisis Divisi[]
}

model Divisi {
  id_divisi     String     @id @default(uuid())
  nama_divisi   String     @db.Text
  department_id String
  department_fk Department @relation(fields: [department_id], references: [id_department], onDelete: Cascade)
  ext_tlp       String     @db.Text

  karyawans Karyawan[]
}

model Karyawan {
  id_karyawan     String   @id
  nik             String   @db.Char(50)
  nama            String   @db.Text
  nama_alias      String
  alamat          String   @db.LongText
  no_ktp          String   @db.Char(16)
  telp            String   @db.Text
  divisi_id       String
  divisi_fk       Divisi   @relation(fields: [divisi_id], references: [id_divisi], onDelete: Cascade)
  jabatan         String   @db.Text
  call_sign       String   @db.Char(150)
  status_karyawan String   @db.Char(50)
  keterangan      String   @db.Char(150)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@unique([nik])
  @@unique([no_ktp])
}

model Inventory {
  id_barang             String    @id @default(uuid())
  kode_barang           String    @unique @db.Char(50)
  nama_barang           String    @db.Text
  kelompok_barang       String    @db.Char(100)
  deskripsi_barang      String?   @db.Text
  merk                  String?   @db.Char(100)
  tipe_path_number      String?   @db.Char(100)
  serial_number         String?   @db.Char(100)
  tgl_pembelian         DateTime?
  harga                 Float?
  tempat_pembelian      String?   @db.Char(100)
  id_penanggungjawab    String?   @db.Char(50)
  status_kondisi_barang String?   @db.Char(50)
  department_permilik   String?   @db.Char(100)
  tempat_jokasi_barang  String?   @db.Char(200)
  tgl_exp_paramsi       DateTime?
  path_folder           String?   @db.Text
  gambar                String?   @db.Text
  expand_data           Json?
  keterangan            String?   @db.Text
  create_date           DateTime  @default(now())
  create_id_user        String?   @db.Char(50)
  modified_date         DateTime?
  modified_id_user      String?   @db.Char(50)
}
